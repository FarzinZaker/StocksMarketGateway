(function(e,t){var n=typeof t.FileReader!="undefined",r=function(t){var n=e.split((t.valAttr("allowing")||"").toLowerCase());if(e.inArray("jpg",n)>-1&&e.inArray("jpeg",n)==-1)n.push("jpeg");else if(e.inArray("jpeg",n)>-1&&e.inArray("jpg",n)==-1)n.push("jpg");return n};e.formUtils.addValidator({name:"mime",validatorFunction:function(t,i){var s=i.get(0).files||[];if(n){var o=true,u="",a=r(i);e.each(s,function(t,n){o=false;u=n.type||"";e.each(a,function(e,t){o=u.indexOf(t)>-1;if(o){return false}});return o});return o}else{return e.formUtils.validators.validate_extension.validatorFunction(t,i)}},errorMessage:"The file you are trying to upload is of wrong type",errorMessageKey:"wrongFileType"});e.formUtils.addValidator({name:"extension",validatorFunction:function(t,n){var i=true,s=r(n);e.each(n.get(0).files||[],function(t,n){var r=n.value,o=r.substr(r.lastIndexOf(".")+1);if(e.inArray(o.toLowerCase(),s)==-1){i=false;return false}});return i},errorMessage:"The file you are trying to upload is of wrong type",errorMessageKey:"wrongFileType"});e.formUtils.addValidator({name:"size",validatorFunction:function(t,r){var i=r.valAttr("max-size");if(!i){console.log('Input "'+r.attr("name")+'" is missing data-validation-max-size attribute');return true}else if(!n){return true}var s=e.formUtils.convertSizeNameToBytes(i),o=true;e.each(r.get(0).files||[],function(e,t){o=t.size<=s;return o});return o},errorMessage:"The file you are trying to upload is too large",errorMessageKey:"wrongFileSize"});e.formUtils.convertSizeNameToBytes=function(e){e=e.toUpperCase();if(e.substr(e.length-1,1)=="M"){return parseInt(e.substr(0,e.length-1),10)*1024*1024}else if(e.substr(e.length-2,2)=="MB"){return parseInt(e.substr(0,e.length-2),10)*1024*1024}else if(e.substr(e.length-2,2)=="KB"){return parseInt(e.substr(0,e.length-2),10)*1024}else if(e.substr(e.length-1,1)=="B"){return parseInt(e.substr(0,e.length-1),10)}else{return parseInt(e,10)}};e(t).one("validatorsLoaded formValidationSetup",function(t,n){var r;if(n){r=n.find('input[type="file"]')}else{r=e('input[type="file"]')}r.filter("*[data-validation]").bind("change",function(){e(this).removeClass("error").parent().find(".form-error").remove()})})})(jQuery,window)