(function(e){var t=e.Axis,n=e.Chart,r=e.Color,i=e.Legend,s=e.LegendSymbolMixin,o=e.Series,u=e.getOptions(),a=e.each,f=e.extend,l=e.extendClass,c=e.merge,h=e.pick,p=e.numberFormat,d=e.seriesTypes,v=e.wrap,m=function(){},g=e.ColorAxis=function(){this.isColorAxis=!0;this.init.apply(this,arguments)};f(g.prototype,t.prototype);f(g.prototype,{defaultColorAxisOptions:{lineWidth:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(e,n){var r=e.options.legend.layout!=="vertical",i;i=c(this.defaultColorAxisOptions,{side:r?2:1,reversed:!r},n,{isX:r,opposite:!r,showEmpty:!1,title:null,isColor:!0});t.prototype.init.call(this,e,i);n.dataClasses&&this.initDataClasses(n);this.initStops(n);this.isXAxis=!0;this.horiz=r;this.zoomEnabled=!1},tweenColors:function(e,t,n){var r=t.rgba[3]!==1||e.rgba[3]!==1;return(r?"rgba(":"rgb(")+Math.round(t.rgba[0]+(e.rgba[0]-t.rgba[0])*(1-n))+","+Math.round(t.rgba[1]+(e.rgba[1]-t.rgba[1])*(1-n))+","+Math.round(t.rgba[2]+(e.rgba[2]-t.rgba[2])*(1-n))+(r?","+(t.rgba[3]+(e.rgba[3]-t.rgba[3])*(1-n)):"")+")"},initDataClasses:function(e){var t=this,n=this.chart,i,s=0,o=this.options;this.dataClasses=i=[];a(e.dataClasses,function(u,a){var f,u=c(u);i.push(u);if(!u.color)o.dataClassColor==="category"?(f=n.options.colors,u.color=f[s++],s===f.length&&(s=0)):u.color=t.tweenColors(r(o.minColor),r(o.maxColor),a/(e.dataClasses.length-1))})},initStops:function(e){this.stops=e.stops||[[0,this.options.minColor],[1,this.options.maxColor]];a(this.stops,function(e){e.color=r(e[1])})},setOptions:function(e){t.prototype.setOptions.call(this,e);this.options.crosshair=this.options.marker;this.coll="colorAxis"},setAxisSize:function(){var e=this.legendSymbol,t=this.chart,n,r,i;if(e)this.left=n=e.attr("x"),this.top=r=e.attr("y"),this.width=i=e.attr("width"),this.height=e=e.attr("height"),this.right=t.chartWidth-n-i,this.bottom=t.chartHeight-r-e,this.len=this.horiz?i:e,this.pos=this.horiz?n:r},toColor:function(e,t){var n,r=this.stops,i,s=this.dataClasses,o,u;if(s)for(u=s.length;u--;){if(o=s[u],i=o.from,r=o.to,(i===void 0||e>=i)&&(r===void 0||e<=r)){n=o.color;if(t)t.dataClass=u;break}}else{this.isLog&&(e=this.val2lin(e));n=1-(this.max-e)/(this.max-this.min);for(u=r.length;u--;)if(n>r[u][0])break;i=r[u]||r[u+1];r=r[u+1]||i;n=1-(r[0]-n)/(r[0]-i[0]||1);n=this.tweenColors(i.color,r.color,n)}return n},getOffset:function(){var e=this.legendGroup;if(e&&(t.prototype.getOffset.call(this),!this.axisGroup.parentGroup))this.axisGroup.add(e),this.gridGroup.add(e),this.labelGroup.add(e),this.added=!0},setLegendColor:function(){var e,t=this.options;e=this.horiz?[0,0,1,0]:[0,0,0,1];this.legendColor={linearGradient:{x1:e[0],y1:e[1],x2:e[2],y2:e[3]},stops:t.stops||[[0,t.minColor],[1,t.maxColor]]}},drawLegendSymbol:function(e,t){var n=e.padding,r=e.options,i=this.horiz,s=h(r.symbolWidth,i?200:12),o=h(r.symbolHeight,i?12:200),r=h(r.labelPadding,i?10:30);this.setLegendColor();t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,s,o).attr({zIndex:1}).add(t.legendGroup);t.legendSymbol.getBBox();this.legendItemWidth=s+n+(i?0:r);this.legendItemHeight=o+n+(i?r:0)},setState:m,visible:!0,setVisible:m,getSeriesExtremes:function(){var e;if(this.series.length)e=this.series[0],this.dataMin=e.valueMin,this.dataMax=e.valueMax},drawCrosshair:function(e,n){var r=!this.cross,i=n&&n.plotX,s=n&&n.plotY,o,u=this.pos,a=this.len;if(n)o=this.toPixels(n.value),o<u?o=u-2:o>u+a&&(o=u+a+2),n.plotX=o,n.plotY=this.len-o,t.prototype.drawCrosshair.call(this,e,n),n.plotX=i,n.plotY=s,!r&&this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.labelGroup)},getPlotLinePath:function(e,n,r,i,s){return s?this.horiz?["M",s-4,this.top-6,"L",s+4,this.top-6,s,this.top,"Z"]:["M",this.left,s,"L",this.left-6,s+6,this.left-6,s-6,"Z"]:t.prototype.getPlotLinePath.call(this,e,n,r,i)},update:function(e,n){a(this.series,function(e){e.isDirtyData=!0});t.prototype.update.call(this,e,n);this.legendItem&&(this.setLegendColor(),this.chart.legend.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var e=this,t=this.chart,n=[],r=t.options.legend,i=r.valueDecimals,o=r.valueSuffix||"",u;a(this.dataClasses,function(r,l){var c=!0,h=r.from,d=r.to;u="";h===void 0?u="< ":d===void 0&&(u="> ");h!==void 0&&(u+=p(h,i)+o);h!==void 0&&d!==void 0&&(u+=" - ");d!==void 0&&(u+=p(d,i)+o);n.push(f({chart:t,name:u,options:{},drawLegendSymbol:s.drawRectangle,visible:!0,setState:m,setVisible:function(){c=this.visible=!c;a(e.series,function(e){a(e.points,function(e){e.dataClass===l&&e.setVisible(c)})});t.legend.colorizeItem(this,c)}},r))});return n},name:""});v(n.prototype,"getAxes",function(e){var t=this.options.colorAxis;e.call(this);this.colorAxis=[];t&&new g(this,t)});v(i.prototype,"getAllItems",function(e){var t=[],n=this.chart.colorAxis[0];n&&(n.options.dataClasses?t=t.concat(n.getDataClassLegendSymbols()):t.push(n),a(n.series,function(e){e.options.showInLegend=!1}));return t.concat(e.call(this))});e={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:m,parallelArrays:["x","y","value"],translateColors:function(){var e=this,t=this.options.nullColor,n=this.colorAxis;a(this.data,function(r){var i=r.value;if(i=i===null?t:n?n.toColor(i,r):r.color||e.color)r.color=i})}};u.plotOptions.heatmap=c(u.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{format:"{point.value}",verticalAlign:"middle",crop:!1,overflow:!1,style:{color:"white",fontWeight:"bold",textShadow:"0 0 5px black"}},marker:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{brightness:.2}}});d.heatmap=l(d.scatter,c(e,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,supportsDrilldown:!0,getExtremesFromAll:!0,init:function(){d.scatter.prototype.init.apply(this,arguments);this.pointRange=this.options.colsize||1;this.yAxis.axisPointRange=this.options.rowsize||1},translate:function(){var e=this.options,t=this.xAxis,n=this.yAxis;this.generatePoints();a(this.points,function(r){var i=(e.colsize||1)/2,s=(e.rowsize||1)/2,o=Math.round(t.len-t.translate(r.x-i,0,1,0,1)),i=Math.round(t.len-t.translate(r.x+i,0,1,0,1)),u=Math.round(n.translate(r.y-s,0,1,0,1)),s=Math.round(n.translate(r.y+s,0,1,0,1));r.plotX=(o+i)/2;r.plotY=(u+s)/2;r.shapeType="rect";r.shapeArgs={x:Math.min(o,i),y:Math.min(u,s),width:Math.abs(i-o),height:Math.abs(s-u)}});this.translateColors()},drawPoints:d.column.prototype.drawPoints,animate:m,getBox:m,drawLegendSymbol:s.drawRectangle,getExtremes:function(){o.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;o.prototype.getExtremes.call(this)}}))})(Highcharts)