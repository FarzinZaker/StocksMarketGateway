(function(e){var t,n=e.Axis,r=e.Chart,i=e.Color,s=e.Legend,o=e.LegendSymbolMixin,u=e.Series,a=e.getOptions(),f=e.each,l=e.extend,c=e.extendClass,h=e.merge,p=e.pick,d=e.numberFormat,v=e.seriesTypes,m=e.wrap,g=function(){};var y=e.ColorAxis=function(){this.isColorAxis=true;this.init.apply(this,arguments)};l(y.prototype,n.prototype);l(y.prototype,{defaultColorAxisOptions:{lineWidth:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:true,endOnTick:true,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(e,t){var r=e.options.legend.layout!=="vertical",i;i=h(this.defaultColorAxisOptions,{side:r?2:1,reversed:!r},t,{isX:r,opposite:!r,showEmpty:false,title:null,isColor:true});n.prototype.init.call(this,e,i);if(t.dataClasses){this.initDataClasses(t)}this.initStops(t);this.isXAxis=true;this.horiz=r;this.zoomEnabled=false},tweenColors:function(e,t,n){var r=t.rgba[3]!==1||e.rgba[3]!==1;return(r?"rgba(":"rgb(")+Math.round(t.rgba[0]+(e.rgba[0]-t.rgba[0])*(1-n))+","+Math.round(t.rgba[1]+(e.rgba[1]-t.rgba[1])*(1-n))+","+Math.round(t.rgba[2]+(e.rgba[2]-t.rgba[2])*(1-n))+(r?","+(t.rgba[3]+(e.rgba[3]-t.rgba[3])*(1-n)):"")+")"},initDataClasses:function(e){var t=this,n=this.chart,r,s=0,o=this.options;this.dataClasses=r=[];f(e.dataClasses,function(u,a){var f;u=h(u);r.push(u);if(!u.color){if(o.dataClassColor==="category"){f=n.options.colors;u.color=f[s++];if(s===f.length){s=0}}else{u.color=t.tweenColors(i(o.minColor),i(o.maxColor),a/(e.dataClasses.length-1))}}})},initStops:function(e){this.stops=e.stops||[[0,this.options.minColor],[1,this.options.maxColor]];f(this.stops,function(e){e.color=i(e[1])})},setOptions:function(e){n.prototype.setOptions.call(this,e);this.options.crosshair=this.options.marker;this.coll="colorAxis"},setAxisSize:function(){var e=this.legendSymbol,t=this.chart,n,r,i,s;if(e){this.left=n=e.attr("x");this.top=r=e.attr("y");this.width=i=e.attr("width");this.height=s=e.attr("height");this.right=t.chartWidth-n-i;this.bottom=t.chartHeight-r-s;this.len=this.horiz?i:s;this.pos=this.horiz?n:r}},toColor:function(e,n){var r,i=this.stops,s,o,u,a=this.dataClasses,f,l;if(a){l=a.length;while(l--){f=a[l];s=f.from;o=f.to;if((s===t||e>=s)&&(o===t||e<=o)){u=f.color;if(n){n.dataClass=l}break}}}else{if(this.isLog){e=this.val2lin(e)}r=1-(this.max-e)/(this.max-this.min);l=i.length;while(l--){if(r>i[l][0]){break}}s=i[l]||i[l+1];o=i[l+1]||s;r=1-(o[0]-r)/(o[0]-s[0]||1);u=this.tweenColors(s.color,o.color,r)}return u},getOffset:function(){var e=this.legendGroup;if(e){n.prototype.getOffset.call(this);if(!this.axisGroup.parentGroup){this.axisGroup.add(e);this.gridGroup.add(e);this.labelGroup.add(e);this.added=true}}},setLegendColor:function(){var e,t=this.horiz,n=this.options;e=t?[0,0,1,0]:[0,0,0,1];this.legendColor={linearGradient:{x1:e[0],y1:e[1],x2:e[2],y2:e[3]},stops:n.stops||[[0,n.minColor],[1,n.maxColor]]}},drawLegendSymbol:function(e,t){var n=e.padding,r=e.options,i=this.horiz,s,o=p(r.symbolWidth,i?200:12),u=p(r.symbolHeight,i?12:200),a=p(r.labelPadding,i?10:30);this.setLegendColor();t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,o,u).attr({zIndex:1}).add(t.legendGroup);s=t.legendSymbol.getBBox();this.legendItemWidth=o+n+(i?0:a);this.legendItemHeight=u+n+(i?a:0)},setState:g,visible:true,setVisible:g,getSeriesExtremes:function(){var e;if(this.series.length){e=this.series[0];this.dataMin=e.valueMin;this.dataMax=e.valueMax}},drawCrosshair:function(e,t){var r=!this.cross,i=t&&t.plotX,s=t&&t.plotY,o,u=this.pos,a=this.len;if(t){o=this.toPixels(t.value);if(o<u){o=u-2}else if(o>u+a){o=u+a+2}t.plotX=o;t.plotY=this.len-o;n.prototype.drawCrosshair.call(this,e,t);t.plotX=i;t.plotY=s;if(!r&&this.cross){this.cross.attr({fill:this.crosshair.color}).add(this.labelGroup)}}},getPlotLinePath:function(e,t,r,i,s){if(s){return this.horiz?["M",s-4,this.top-6,"L",s+4,this.top-6,s,this.top,"Z"]:["M",this.left,s,"L",this.left-6,s+6,this.left-6,s-6,"Z"]}else{return n.prototype.getPlotLinePath.call(this,e,t,r,i)}},update:function(e,t){f(this.series,function(e){e.isDirtyData=true});n.prototype.update.call(this,e,t);if(this.legendItem){this.setLegendColor();this.chart.legend.colorizeItem(this,true)}},getDataClassLegendSymbols:function(){var e=this,n=this.chart,r=[],i=n.options.legend,s=i.valueDecimals,u=i.valueSuffix||"",a;f(this.dataClasses,function(i,c){var h=true,p=i.from,v=i.to;a="";if(p===t){a="< "}else if(v===t){a="> "}if(p!==t){a+=d(p,s)+u}if(p!==t&&v!==t){a+=" - "}if(v!==t){a+=d(v,s)+u}r.push(l({chart:n,name:a,options:{},drawLegendSymbol:o.drawRectangle,visible:true,setState:g,setVisible:function(){h=this.visible=!h;f(e.series,function(e){f(e.points,function(e){if(e.dataClass===c){e.setVisible(h)}})});n.legend.colorizeItem(this,h)}},i))});return r},name:""});m(r.prototype,"getAxes",function(e){var t=this.options,n=t.colorAxis;e.call(this);this.colorAxis=[];if(n){e=new y(this,n)}});m(s.prototype,"getAllItems",function(e){var t=[],n=this.chart.colorAxis[0];if(n){if(n.options.dataClasses){t=t.concat(n.getDataClassLegendSymbols())}else{t.push(n)}f(n.series,function(e){e.options.showInLegend=false})}return t.concat(e.call(this))});var b={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:g,parallelArrays:["x","y","value"],translateColors:function(){var e=this,t=this.options.nullColor,n=this.colorAxis;f(this.data,function(r){var i=r.value,s;s=i===null?t:n?n.toColor(i,r):r.color||e.color;if(s){r.color=s}})}};a.plotOptions.heatmap=h(a.plotOptions.scatter,{animation:false,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{format:"{point.value}",verticalAlign:"middle",crop:false,overflow:false,style:{color:"white",fontWeight:"bold",textShadow:"0 0 5px black"}},marker:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:true},hover:{brightness:.2}}});v.heatmap=c(v.scatter,h(b,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:true,supportsDrilldown:true,getExtremesFromAll:true,init:function(){v.scatter.prototype.init.apply(this,arguments);this.pointRange=this.options.colsize||1;this.yAxis.axisPointRange=this.options.rowsize||1},translate:function(){var e=this,t=e.options,n=e.xAxis,r=e.yAxis;e.generatePoints();f(e.points,function(e){var i=(t.colsize||1)/2,s=(t.rowsize||1)/2,o=Math.round(n.len-n.translate(e.x-i,0,1,0,1)),u=Math.round(n.len-n.translate(e.x+i,0,1,0,1)),a=Math.round(r.translate(e.y-s,0,1,0,1)),f=Math.round(r.translate(e.y+s,0,1,0,1));e.plotX=(o+u)/2;e.plotY=(a+f)/2;e.shapeType="rect";e.shapeArgs={x:Math.min(o,u),y:Math.min(a,f),width:Math.abs(u-o),height:Math.abs(f-a)}});e.translateColors()},drawPoints:v.column.prototype.drawPoints,animate:g,getBox:g,drawLegendSymbol:o.drawRectangle,getExtremes:function(){u.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;u.prototype.getExtremes.call(this)}}))})(Highcharts)